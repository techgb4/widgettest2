const inputData = [{
        "Tab": {
              "display_value": "JS Widgets",
              "ID": "4258555000006746007"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006751007/File_upload/download?filepath=1700660928351_01._Rent_Receipt.docx.zip",
        "Folder.Great_Folder": "",
        "ID": "4258555000006751007",
        "Folder": {
              "display_value": "API Document",
              "ID": "4258555000006746011"
        },
        "Folder.Folder_Name": "API Document",
        "Name": "01. Rent Receipt.docx.zip"
  },
  {
        "Tab": {
              "display_value": "JS Widgets",
              "ID": "4258555000006746007"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006751007/File_upload/download?filepath=1700660928351_01._Rent_Receipt.docx.zip",
        "Folder.Great_Folder": "Casagrand",
        "ID": "4258555000006751007",
        "Folder": {
              "display_value": "OPS EPS",
              "ID": "4258555000006746011"
        },
        "Folder.Folder_Name": "OPS EPS",
        "Name": "01. Rent Receipt.docx.zip"
  },
  {
        "Tab": {
              "display_value": "JS Widgets",
              "ID": "4258555000006746007"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006748011/File_upload/download?filepath=1700648676004_All_Student_Details.pdf",
        "Folder.Great_Folder": "",
        "ID": "4258555000006748011",
        "Folder": {
              "display_value": "API Document",
              "ID": "4258555000006746011"
        },
        "Folder.Folder_Name": "API Document",
        "Name": "All Student Details.pdf"
  },
  {
        "Tab": {
              "display_value": "JS Widgets",
              "ID": "4258555000006746007"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006746017/File_upload/download?filepath=1700636352701__1694064494158_Screenshot_2023-09-07_at_10.57.21_AM.png",
        "Folder.Great_Folder": "",
        "ID": "4258555000006746017",
        "Folder": {
              "display_value": "API Document",
              "ID": "4258555000006746011"
        },
        "Folder.Folder_Name": "API Document",
        "Name": "File"
  },
  {
        "Tab": {
              "display_value": "JS Widgets",
              "ID": "4258555000006746007"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006752031/File_upload/download?filepath=1700725658100_low-code-visionary.jpeg",
        "Folder.Great_Folder": "Realestate Widget",
        "ID": "4258555000006752031",
        "Folder": {
              "display_value": "Casagrand",
              "ID": "4258555000006752025"
        },
        "Folder.Folder_Name": "Casagrand",
        "Name": "der"
  },
  {
        "Tab": {
              "display_value": "POC Folder",
              "ID": "4258555000006745003"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006689197/File_upload/download?filepath=1700654104882_20230819100314.pdf",
        "Folder.Great_Folder": "",
        "ID": "4258555000006689197",
        "Folder": {
              "display_value": "DS Files",
              "ID": "4258555000006679007"
        },
        "Folder.Folder_Name": "DS Files",
        "Name": "20230819100314.pdf"
  },
  {
        "Tab": {
              "display_value": "POC Folder",
              "ID": "4258555000006745003"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006743019/File_upload/download?filepath=1700629285982_icons8-zip-40.png.zip",
        "Folder.Great_Folder": "",
        "ID": "4258555000006743019",
        "Folder": {
              "display_value": "DS Files",
              "ID": "4258555000006679007"
        },
        "Folder.Folder_Name": "DS Files",
        "Name": "icons8-zip-40.png.zip"
  },
  {
        "Tab": {
              "display_value": "POC Folder",
              "ID": "4258555000006745003"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006743015/File_upload/download?filepath=1700625869590_image_24f09ec9-8f10-446c-a055-41b796340dda.jpeg",
        "Folder.Great_Folder": "",
        "ID": "4258555000006743015",
        "Folder": {
              "display_value": "DS Files",
              "ID": "4258555000006679007"
        },
        "Folder.Folder_Name": "DS Files",
        "Name": "image_24f09ec9-8f10-446c-a055-41b796340dda.jpeg"
  },
  {
        "Tab": {
              "display_value": "POC Folder",
              "ID": "4258555000006745003"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006743011/File_upload/download?filepath=1700625820538_WhatsApp_Image_2023-07-24_at_08.57.39.jpeg",
        "Folder.Great_Folder": "",
        "ID": "4258555000006743011",
        "Folder": {
              "display_value": "DS Files",
              "ID": "4258555000006679007"
        },
        "Folder.Folder_Name": "DS Files",
        "Name": "WhatsApp Image 2023-07-24 at 08.57.39.jpeg"
  },
  {
        "Tab": {
              "display_value": "POC Folder",
              "ID": "4258555000006745003"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006690015/File_upload/download?filepath=1700578244988_seatbooking2__1_.zip",
        "Folder.Great_Folder": "",
        "ID": "4258555000006690015",
        "Folder": {
              "display_value": "DS Files",
              "ID": "4258555000006679007"
        },
        "Folder.Folder_Name": "DS Files",
        "Name": "seatbooking2 (1).zip"
  },
  {
        "Tab": {
              "display_value": "JS Widgets",
              "ID": "4258555000006746007"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006748007/File_upload/download?filepath=1700648631532_01._Rent_Receipt.docx.zip",
        "Folder.Great_Folder": "",
        "ID": "4258555000006748007",
        "Folder": {
              "display_value": "Order Management",
              "ID": "4258555000006746027"
        },
        "Folder.Folder_Name": "Order Management",
        "Name": "01. Rent Receipt.docx.zip"
  },
  {
        "Tab": {
              "display_value": "JS Widgets",
              "ID": "4258555000006746007"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006746023/File_upload/download?filepath=1700637017664_low-code-visionary.jpeg",
        "Folder.Great_Folder": "",
        "ID": "4258555000006746023",
        "Folder": {
              "display_value": "Order Management",
              "ID": "4258555000006746027"
        },
        "Folder.Folder_Name": "Order Management",
        "Name": "data"
  },
  {
        "Tab": {
              "display_value": "POC Folder",
              "ID": "4258555000006745003"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006751003/File_upload/download?filepath=1700660281583_VISCOSE_E-LOG_BOOK_DATA_-_SIC_1.xlsx",
        "Folder.Great_Folder": "",
        "ID": "4258555000006751003",
        "Folder": {
              "display_value": "POC Scope",
              "ID": "4258555000006746003"
        },
        "Folder.Folder_Name": "POC Scope",
        "Name": "VISCOSE E-LOG BOOK DATA - SIC 1.xlsx"
  },
  {
        "Tab": {
              "display_value": "POC Folder",
              "ID": "4258555000006745003"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006748003/File_upload/download?filepath=1700648217039_Latest_work_india.pdf",
        "Folder.Great_Folder": "",
        "ID": "4258555000006748003",
        "Folder": {
              "display_value": "POC Scope",
              "ID": "4258555000006746003"
        },
        "Folder.Folder_Name": "POC Scope",
        "Name": "Latest work india.pdf"
  },
  {
        "Tab": {
              "display_value": "POC Folder",
              "ID": "4258555000006745003"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006743023/File_upload/download?filepath=1700629601183_MariSelvam_Murugesan.pdf",
        "Folder.Great_Folder": "",
        "ID": "4258555000006743023",
        "Folder": {
              "display_value": "POC Scope",
              "ID": "4258555000006746003"
        },
        "Folder.Folder_Name": "POC Scope",
        "Name": "MariSelvam Murugesan.pdf"
  },
  {
        "Tab": {
              "display_value": "POC Folder",
              "ID": "4258555000006745003"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006743007/File_upload/download?filepath=1700625715963_Reprint_881035355553102.pdf",
        "Folder.Great_Folder": "",
        "ID": "4258555000006743007",
        "Folder": {
              "display_value": "POC Scope",
              "ID": "4258555000006746003"
        },
        "Folder.Folder_Name": "POC Scope",
        "Name": "Reprint_881035355553102.pdf"
  },
  {
        "Tab": {
              "display_value": "POC Folder",
              "ID": "4258555000006745003"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006743003/File_upload/download?filepath=1700625073392_All_Forms__1_.xls",
        "Folder.Great_Folder": "",
        "ID": "4258555000006743003",
        "Folder": {
              "display_value": "POC Scope",
              "ID": "4258555000006746003"
        },
        "Folder.Folder_Name": "POC Scope",
        "Name": "All Forms (1).xls"
  },
  {
        "Tab": {
              "display_value": "JS Widgets",
              "ID": "4258555000006746007"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006752005/File_upload/download?filepath=1700661681172_All_Forms__1_.xls",
        "Folder.Great_Folder": "API Document",
        "ID": "4258555000006752005",
        "Folder": {
              "display_value": "Realestate Widget",
              "ID": "4258555000006749003"
        },
        "Folder.Folder_Name": "Realestate Widget",
        "Name": "eywuer"
  },
  {
        "Tab": {
              "display_value": "JS Widgets",
              "ID": "4258555000006746007"
        },
        "File_upload": "/api/v2/zcapps/creator-file-system/report/All_Files/4258555000006752011/File_upload/download?filepath=1700718119604_All_Forms__1_.xls",
        "Folder.Great_Folder": "API Document",
        "ID": "4258555000006752011",
        "Folder": {
              "display_value": "Seat Booking App",
              "ID": "4258555000006752015"
        },
        "Folder.Folder_Name": "Seat Booking App",
        "Name": "re"
  }
];


const structure = [];

let exsistance = false;
let tabsFolder;
let foldersFile;
let subFolders;



for (let eachData of inputData) {

  for (let thisStructure of structure) {
        exsistance = false;
        if (eachData.Tab.display_value == thisStructure.tab) {
              exsistance = true;
              tabsFolder = thisStructure.folders;
              break;
        }
  }

  if (exsistance) {
        exsistance = false;

        if (!(eachData['Folder.Great_Folder'].trim())) {

              for (let thisTab of structure) {
                    for (let folders of thisTab.folders) {

                          if (checkFolder(folders)) {
                                break;
                          }

                    }

              }

              function checkFolder(folder) {

                    if (folder.name == eachData.Folder.display_value) {
                          exsistance = true;
                          foldersFile = folder.files;
                          return true

                    }


                    for (let subFolder of folder.subFolders) {
                          checkFolder(subFolder)
                    }

                    return false;
              }


              if (exsistance) {
                    exsistance = false;
                    foldersFile.push({
                          name: eachData.Name,
                          file: eachData.File_upload
                    })


              } else {
                    tabsFolder.push({
                                name: eachData.Folder.display_value,
                                files: [{
                                      name: eachData.Name,
                                      file: eachData.File_upload
                                }],
                                subFolders: []

                          }

                    )

              }

        } else {


              const dyu = [];

              function cree(great_folder) {


                    if (great_folder) {
                          dyu.push(great_folder)



                          for (let each of inputData) {
                                if (each.Folder.display_value == great_folder) {
                                      cree(each['Folder.Great_Folder'], each);
                                      break;
                                }
                          }

                    }


              }

              cree(eachData['Folder.Great_Folder'], eachData);

        //       console.log(dyu);

	      const ios = [];



              function checkFolder(folder,presets) {
		    
	
                    if (folder.name == presets) {
			  if (ios.length == 0) {
				ios.push(folder.subFolders)

			  }
                          exsistance = true;
                          subFolders = folder.subFolders;
                          return true

                    } else {

                          for (let subFolder of folder.subFolders) {

                                checkFolder(subFolder,presets)
                          }
                    }




                    return false;
              }

	   

	      for (let i = dyu.length - 1 ; i >= 0; i--) {

		for (let thisTab of structure) {
			for (let folders of thisTab.folders) {
    
			      if (checkFolder(folders,dyu[i])) {
				    break;
			      }
    
			}
    
			if (exsistance) {
    
			      break;
			}
		  }

		   
	      }

	      console.log(JSON.stringify(ios))

              

              if (exsistance) {
                    exsistance = false;
                    subFolders.push({
                          name: eachData.Folder.display_value,
                          files: [{
                                      name: eachData.Name,
                                      file: eachData.File_upload
                                }

                          ],
                          subFolders: []

                    })

              } else {
                    
                

              }

        }




  } else {




        structure.push({
              tab: eachData.Tab.display_value,
              folders: [{
                    name: eachData.Folder.display_value,
                    files: [{
                          name: eachData.Name,
                          file: eachData.File_upload
                    }],
                    subFolders: []

              }]
        })

  }




}


//     console.log(JSON.stringify(structure))